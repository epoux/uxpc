function pageLoad(){function a(){return text="",window.getSelection?text=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(text=document.selection.createRange().text),text}function b(){$(".swatches li").unbind("click").on("click",function(){hClass=$(this).attr("class"),hText=$(this).attr("title"),$(this).toggleClass("checked"),console.log(hClass),currHighlight="highlight-"+n,$(this).parent().parent().find("input"+hClass).attr("checked","checked"),$(this).hasClass("checked")?($("body").highlight(hText,{className:hClass}),$("body p").find("span span").unwrap()):$("body p").find("span").removeClass(hClass)})}$("#view-screen-reading").mouseup(function(b){a();var c=b.pageX,d=b.pageY;text.length>1?$(".oo-menu").fadeIn(100).css("left",c).css("top",d):($(".oo-menu").fadeOut(200),$(secondary).hide()),$(".oo-menu .search-term").html('<input type="checkbox" value="" checked>'+text)}),$(".colour-picker ul").hide(),$(".colour-picker span.caret").unbind("click").on("click",function(){$(".colour-picker ul").toggle()}),$(".oo-menu").hide(),$("#anchor").on("click",function(){var a=$(this).offset(),b=a.left,c=a.top,d=$(this).width();$(".oo-menu").toggle().css("left",b+d+10).css("top",c)}),$(".oo-menu li a").on("mouseenter mouseleave",function(){secondary=$(this).attr("href"),$(secondary).show(),$(".oo-menu").find("div").not($(secondary)).hide()}),$(".colour-picker ul li").unbind("click").on("click",function(){$(this).addClass("selected"),$(".colour-picker ul li").not(this).removeClass("selected"),currClass=$(this).attr("class"),$(".search-term").addClass(currClass),$(".colour-picker ul").fadeOut(100)}),n=0,$(".oo-menu .btn-add").unbind("click").on("click",function(){n+=1,$(".oo-menu").fadeOut(100),$(".search-term").removeClass(currClass),$("ul.swatches").append('<li class="'+currClass+'" title="'+text+'"></li>'),$("ul.swatches li").removeClass("selected"),$(".highlight-choices").append('<span class="highlight-checkbox" id="highlight-'+n+'" title="'+text+'"><input type="checkbox" class="'+currClass+'"></span>'),newWidth=100/$("ul.swatches li").size()+"%",$("ul.swatches li, .highlight-checkbox").css("width",newWidth),b(),$(".notification").fadeIn().html(n).css("visibility","visible"),$("ul.highlights-list.main").append('<li><input type="checkbox" class="checkbox-highlight">&nbsp;<input type="checkbox">&nbsp;<span class="'+currClass+'">'+text+"</span></li>")}),$("#view-screen-reading").load("includes/claims.html .wrap",function(){$(".page-layout").hide(),$('[id^="claim"]').hide(),$(".expandable").on("click",function(){$(this).parent().find('[id*="claim"]').slideToggle(400,function(){docHeight=$("#view-screen-reading").height(),highlightsHeight=$("#panel-claims").height(),console.log("docHeight: "+docHeight),console.log("highlightsHeight: "+highlightsHeight),$("#viewer-claims").toggleClass("expanded"),$("#viewer-figures, #viewer-descriptions").fadeToggle(400)})}),$(".content-main-wrapper").scroll(function(){})}),$(".markers button, .markers a").popover(),$(".highlights-filter a").on("click",function(){$(".filter-trigger").html($(this).parent().attr("id")+'&nbsp;<b class="caret"></b>'),url="includes/"+$(this).parent().attr("id")+".html",$("#view-screen-reading").load(url,function(){$(".page-layout").hide();var a='<img src="images/popover-diagram.jpg">';$(".popover-image").popover({placement:"bottom",content:a,html:!0,trigger:"click focus",title:"Figure 3",container:"body",viewport:{selector:"body",padding:0},template:'<div class="popover wide" role="tooltip" style="margin-left:-220px;"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),$(".annotation").on("mouseenter mouseleave",function(){$(".container-main").hasClass("dual-screen")||$(this).toggleClass("expanded")})})})}jQuery.extend({highlight:function(a,b,c,d){if(3===a.nodeType){var e=a.data.match(b);if(e){var f=document.createElement(c||"span");f.className=d||"highlight";var g=a.splitText(e.index);g.splitText(e[0].length);var h=g.cloneNode(!0);return f.appendChild(h),g.parentNode.replaceChild(f,g),1}}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName)&&(a.tagName!==c.toUpperCase()||a.className!==d))for(var i=0;i<a.childNodes.length;i++)i+=jQuery.highlight(a.childNodes[i],b,c,d);return 0}}),jQuery.fn.unhighlight=function(a){var b={className:"highlight",element:"span"};return jQuery.extend(b,a),this.find(b.element+"."+b.className).each(function(){var a=this.parentNode;a.replaceChild(this.firstChild,this),a.normalize()}).end()},jQuery.fn.highlight=function(a,b){var c={className:"highlight",element:"span",caseSensitive:!1,wordsOnly:!1};if(jQuery.extend(c,b),a.constructor===String&&(a=[a]),a=jQuery.grep(a,function(a){return""!=a}),a=jQuery.map(a,function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}),0==a.length)return this;var d=c.caseSensitive?"":"i",e="("+a.join("|")+")";c.wordsOnly&&(e="\\b"+e+"\\b");var f=new RegExp(e,d);return this.each(function(){jQuery.highlight(this,f,c.element,c.className)})},$(document).ready(function(){function a(){$(".navbar-left").load("components/nav-left.html",function(){e(),$('a[title="Search"]').on("click",function(){$(".container-main").load("views/search.html",function(){$(".pull-out a.pull").on("click",function(){$(".pull-out").toggleClass("slide-in"),$(".container-main").toggleClass("nudge"),$(".search-content").hasClass("shrink")&&($(".search-content").toggleClass("shrink"),$(".pull-out").toggleClass("expand"),$(".dashboard").toggle(400)),pop=function(){return theid=$(this).attr("rel"),$("#pop").load("includes/popover.html"),$("#pop").html()},$(".search-term").popover({placement:"right",content:pop,html:!0,trigger:"focus hover",container:"body",viewport:{selector:"body",padding:0}})}),$(".pull-out .search-term").unbind("click").on("click",function(){$(this).parent().parent().hasClass("selected")||$(this).parent().parent().toggleClass("selected"),$(".presearch-field").not($(this).parent().parent()).removeClass("selected"),$(this).toggleClass("current-search"),$(".search-term").not($(this)).removeClass("current-search");var a=$(this).attr("rel"),b="includes/searchresults.html #"+a;$(".search-content").load(b,function(){})}),$("#dashboard").on("click",function(){$(".search-content").toggleClass("shrink"),$(".pull-out").toggleClass("expand"),$(".dashboard").toggleClass("active").delay(400).fadeToggle(400)}),$(".query-builder .mark-query").click(function(){$(this).find(".glyphicon").toggleClass("glyphicon-star glyphicon-star-empty").toggleClass("marked"),$(this).attr($(".query-builder .mark-query .glyphicon").hasClass("marked")?{title:"Query is marked","data-original-title":"Query is marked"}:{title:"Mark query","data-original-title":"Mark query"})}).tooltip(),$(".search-param").on("mouseenter mouseleave",function(){$(this).toggleClass("hover")}),$(".search-param button").on("click",function(){$(this).toggleClass("btn-default")}),$("ul.view li a").click(function(a){a.preventDefault();var b=".concept-mode."+$(this).attr("title");$(b).toggleClass("active"),$(".concept-mode").not(b).removeClass("active"),$(this).parent().toggleClass("active"),$(this).parent().parent().find("li").not($(this).parent()).removeClass("active")}),$(".action-group a").tooltip({container:"body"}),appendage='<li><input type="checkbox"><input type="checkbox" class="checkbox-highlight"><span class="light-orange">Voice command</span><em class="version small">v3</em><span class="action-group"><a href="#" class="small" data-toggle="tooltip" data-placement="top" title="Hide"><span class="glyphicon glyphicon-eye-close"></span></a><a href="#" class="small" data-toggle="tooltip" data-placement="top" title="Edit"><span class="glyphicon glyphicon-pencil"></span></a><a href="#" class="small" data-toggle="tooltip" data-placement="top" title="Delete"><span class="glyphicon glyphicon-remove-circle"></span></a></span></li>',$(".queryhighlights #add-new").on("click",function(){$("ul.highlights-list.main").append(appendage)})})}),$('a[title="Application"]').on("click",function(){$(".container-main").load("views/application.html",function(){pageLoad(),c(),d()})}),$('a[title="Tags & viewer"]').on("click",function(){$(".container-main").load("views/tags-and-viewer.html"),$(".container-main").css("position","relative")}),$('a[title="Office actions"]').on("click",function(){$(".container-main").load("views/office-actions.html")})})}function b(){$(".nav-right").load("components/nav-right.html",function(){f()})}function c(){$(".header").load("components/header.html",function(){g()})}function d(){$(".highlights-annotations-bar").load("components/highlights-annotations.html",function(){pageLoad(),h(),i()})}function e(){var a="EP13742066";$(".ep").on("mouseenter mouseleave",function(){$(this).parent().toggleClass("extend")}),$(".ep").mouseenter(function(){$(".appNo").html(a)}).mouseleave(function(){$(".appNo").html("EP...")}),$(".arrow-back").parent().mouseenter(function(){$(this).css("width","100px")}).mouseleave(function(){$(this).css("width","50px")}),$(".navbar-left ul li").on("mouseenter mouseleave",function(){$(this).find(".secondary-nav").delay(800).toggleClass("slide-in"),$(this).find("a").toggleClass("selected")}),$(".navbar-left ul li").not('a[title="search"]').on("click",function(){$(".container-main").removeClass("nudge")})}function f(){$(".nav-right ul li a, button").tooltip({container:"body"}),$(".nav-right ul li a").unbind("click").on("click",function(){$(this).toggleClass("selected"),$(".nav-right ul li a").not(this).removeClass("selected");var a=$(this).attr("rel"),b=$(".slide-in-menu").find("."+a);$(b).hasClass("slide-in")?$(b).removeClass("slide-in").removeClass("doc-view"):($(b).addClass("slide-in"),$(".slide-in-menu").find(".menu-item").not($(b)).removeClass("doc-view").removeClass("slide-in")),$("#tagswitch").on("click",function(){$(this).parents().find(".menu-item").end().toggleClass("doc-view")})}),$('.nav-right ul li a[rel="queryhighlights"]').on("click",function(){$(".notification").fadeOut(),n=0})}function g(){$("#comm-draft, button.close").click(function(){$(".container-main").toggleClass("dual-screen"),$(".container-main").hasClass("dual-screen")&&$(".annotation .glyphicon").popover({placement:"left",container:"body",title:"Clarity – Claim 20",content:"The term particular criteria used in claim 20 is vague and unclear"})}),$("button.close").click(function(){$("body").popover("destroy")}),$(".btn-multi-toggle .btn, .btn-toggle .btn").click(function(a){$(this).toggleClass("btn-primary active"),$(this).parent().find(".btn").not(this).addClass("btn-default").removeClass("btn-primary active"),a.preventDefault()}),$(".filter-trigger").click(function(a){$(".dropdown-filter-group").toggleClass("visible"),a.stopPropagation()}),$(document).click(function(a){$(a.target).closest(".dropdown-filter-group").length||$(".dropdown-filter-group").is(":visible")&&$(".dropdown-filter-group").toggleClass("visible")})}function h(){$(".trigger-page-layout").on("click",function(){$(this).parent().parent().parent().find(".dropdown-toggle").html('<span class="glyphicon glyphicon-list"></span> Page layout <b class="caret"></b>'),$(".page-layout").show(),$(".screen-reading").hide()}),$(".trigger-screen-reading").on("click",function(){$(this).parent().parent().parent().find(".dropdown-toggle").html('<span class="glyphicon glyphicon-eye-open"></span> Screen reading <b class="caret"></b>'),$(".screen-reading").show(),$(".page-layout").hide()})}function i(){var a=$("#view-screen-reading").height();console.log("docHeight: "+a)}a(),b()});